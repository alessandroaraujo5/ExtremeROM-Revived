From d7bbd1751c35b1d4bc8e9fa5494f563ff4f12a22 Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Thu, 11 Sep 2025 21:56:45 +0200
Subject: [PATCH] Disable StrongBox in DevRootKeyATCmd

Signed-off-by: dupazlasu <dupazlasu66@gmail.com>
---
 smali_classes6/com/android/server/DevRootKeyATCmd.smali | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/smali_classes6/com/android/server/DevRootKeyATCmd.smali b/smali_classes6/com/android/server/DevRootKeyATCmd.smali
index 746db9d4..bf6972dc 100644
--- a/smali_classes6/com/android/server/DevRootKeyATCmd.smali
+++ b/smali_classes6/com/android/server/DevRootKeyATCmd.smali
@@ -3118,6 +3118,8 @@
 
     if-ne v2, v8, :cond_5
 
+    const/4 v10, 0x0
+
     invoke-virtual {v11, v10}, Landroid/security/keystore/KeyGenParameterSpec$Builder;->setIsStrongBoxBacked(Z)Landroid/security/keystore/KeyGenParameterSpec$Builder;
 
     :cond_5
@@ -3364,6 +3366,8 @@
     :cond_c
     if-ne v2, v8, :cond_d
 
+    const/4 v10, 0x0
+
     invoke-virtual {v11, v10}, Landroid/security/keystore/KeyGenParameterSpec$Builder;->setIsStrongBoxBacked(Z)Landroid/security/keystore/KeyGenParameterSpec$Builder;
 
     :cond_d
-- 
2.51.0

