From cbc2be65f9f554d46436dd3a07e095df602cf79a Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Fri, 6 Jun 2025 21:40:35 +0300
Subject: [PATCH] Allow app downgrade

Signed-off-by: ExtremeXT <75576145+ExtremeXT@users.noreply.github.com>
---
 .../pm/PackageManagerServiceUtils.smali       | 35 ++-----------------
 1 file changed, 2 insertions(+), 33 deletions(-)

diff --git a/smali_classes2/com/android/server/pm/PackageManagerServiceUtils.smali b/smali_classes2/com/android/server/pm/PackageManagerServiceUtils.smali
index 3e59bc3b..1e218a36 100644
--- a/smali_classes2/com/android/server/pm/PackageManagerServiceUtils.smali
+++ b/smali_classes2/com/android/server/pm/PackageManagerServiceUtils.smali
@@ -2322,41 +2322,10 @@
 .end method
 
 .method public static isDowngradePermitted(IZ)Z
-    .locals 3
-
-    and-int/lit16 v0, p0, 0x80
-
-    const/4 v1, 0x0
-
-    if-eqz v0, :cond_3
-
-    sget-boolean v0, Landroid/os/Build;->IS_DEBUGGABLE:Z
-
-    const/4 v2, 0x1
-
-    if-nez v0, :cond_2
-
-    if-eqz p1, :cond_0
-
-    goto :goto_0
-
-    :cond_0
-    const/high16 p1, 0x100000
-
-    and-int/2addr p0, p1
-
-    if-eqz p0, :cond_1
-
-    return v2
-
-    :cond_1
-    return v1
+    .locals 1
 
-    :cond_2
-    :goto_0
-    return v2
+    const/4 v0, 0x1
 
-    :cond_3
     return v1
 .end method
 
-- 
2.49.1

